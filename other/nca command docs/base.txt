PACKAGE

package base
    import "dctech/nca7/commands/base"

    NCA v7 Base Commands.

FUNCTIONS

func CommandBreak(state *nca7.State, params []*nca7.Value)
    A "soft" return, break will never return more than one level.

	break [value]

    Calling break inside a loop or if command will return from the current
    BLOCK not the command itself, this makes break good for ensuring if
    returns a specific value and/or "returning" a value to loop. Returns
    value or unchanged.

func CommandBreakIf(state *nca7.State, params []*nca7.Value)
    A "soft" return, breakif will never return more than one level.

	break condition [value]

    Calling break inside a loop or if command will return from the current
    BLOCK not the command itself, this makes break good for ensuring if
    returns a specific value and/or "returning" a value to loop. Returns
    value or unchanged.

func CommandCommand(state *nca7.State, params []*nca7.Value)
    Creates a new user command.

	command name code [paramName...]

    Returns unchanged.

func CommandDelCommand(state *nca7.State, params []*nca7.Value)
    Deletes a command. Be careful with this one! Some actions are not
    reversable from a script.

	delcommand name

    Returns unchanged.

func CommandDelNamespace(state *nca7.State, params []*nca7.Value)
    Deletes a namespace. Be careful with this one! Some actions are not
    reversable from a script. For example it may be a very bad idea to
    delete debug or int.

	delnamespace name

    Returns unchanged.

func CommandDelVar(state *nca7.State, params []*nca7.Value)
    Deletes a variable.

	delvar name

    Returns the deleted vars value.

func CommandEval(state *nca7.State, params []*nca7.Value)
    Evaluates code in the current environment.

	eval code

    Returns the return value of the last command in the code it runs.

func CommandEvalInNew(state *nca7.State, params []*nca7.Value)
    Evaluates code in a new environment.

	evalinnew code

    Returns the return value of the last command in the code it runs.

func CommandEvalInParent(state *nca7.State, params []*nca7.Value)
    Evaluates code in the current environment's parent.

	evalinparent code

    Returns the return value of the last command in the code it runs.

func CommandExists(state *nca7.State, params []*nca7.Value)
    Returns true (-1) if variable exists or if a index exists in a map or
    array.

	exists name
	exists value index

    Returns true or false.

func CommandExit(state *nca7.State, params []*nca7.Value)
    Exit the script.

	exit [value]

    Returns value or unchanged.

func CommandForEach(state *nca7.State, params []*nca7.Value)
    Runs code as command for each entry in a map or array value.

	foreach objectvalue code

    Params for code:

	code key value

    If code returns false foreach aborts. Returns the return value of the
    last command in code.

func CommandGetError(state *nca7.State, params []*nca7.Value)
    Gets the error flag.

	geterror

    Returns true or false.

func CommandIf(state *nca7.State, params []*nca7.Value)
    If the condition is true run true code else if false code exists call
    false code.

	if condition truecode [falsecode]

    Returns the return value of the last command in the code it runs or
    unchanged.

func CommandLen(state *nca7.State, params []*nca7.Value)
    Fetches the element count of an Indexable.

	len value

    Returns the element count.

func CommandLoop(state *nca7.State, params []*nca7.Value)
    Runs code for as long as the code returns true.

	loop code

    Returns the return value of the last command in the code it runs, always
    "0" or "" unless loop exited with ret (In which case the return value is
    unusable by the command calling loop anyway).

func CommandNamespace(state *nca7.State, params []*nca7.Value)
    Creates a new namespace.

	namespace name

    Returns unchanged.

func CommandNop(state *nca7.State, params []*nca7.Value)
    Does nothing.

	nop

    Returns unchanged.

func CommandRet(state *nca7.State, params []*nca7.Value)
    Return from current command.

	ret [value]

    Some commands will be bypassed like if and loop, for example calling ret
    from inside a loop will not return from the loop, it will return from
    the command that called loop. See break. Returns value or unchanged.

func CommandRun(state *nca7.State, params []*nca7.Value)
    Runs code as a user command.

	run code [params...]

    Returns the return value of the last command in the code it runs.

func CommandSet(state *nca7.State, params []*nca7.Value)
    Sets the value of variable "name" to value or sets the value of the map
    or array at index to value.

	set name value
	set objectvalue index value

    Returns value.

func CommandSetError(state *nca7.State, params []*nca7.Value)
    Sets (or unsets) the error flag.

	seterror [value]

    If you pass no params the error flag will be set, to unset pass a false
    value Returns unchanged.

func CommandVar(state *nca7.State, params []*nca7.Value)
    Creates a new variable setting the value to value if present.

	var name [value]

    Returns value or unchanged.

func NewScriptArray() nca7.EditIndexable

func NewScriptArrayFromLit(keys []string, values []*nca7.Value) *nca7.Value

func NewScriptArraySized(size int) nca7.EditIndexable

func NewScriptMap() nca7.EditIndexable

func NewScriptMapFromLit(keys []string, values []*nca7.Value) *nca7.Value

func Setup(state *nca7.State)
    Setup adds the base commands to the state. The base commands are:

	nop
	ret
	exit
	break
	breakif
	seterror
	geterror
	command
	delcommand
	namespace
	delnamespace
	var
	delvar
	set
	exists
	len
	run
	eval
	evalinparent
	evalinnew
	if
	loop
	foreach

    Also registers the following indexables:

	map
	array

    The base commands are more or less required.


TYPES

type ScriptArray []*nca7.Value

func (this *ScriptArray) Exists(index string) bool

func (this *ScriptArray) Get(index string) *nca7.Value

func (this *ScriptArray) Keys() []string

func (this *ScriptArray) Len() int64

func (this *ScriptArray) Set(index string, value *nca7.Value) bool

type ScriptMap map[string]*nca7.Value

func (this ScriptMap) Exists(index string) bool

func (this ScriptMap) Get(index string) *nca7.Value

func (this ScriptMap) Keys() []string

func (this ScriptMap) Len() int64

func (this ScriptMap) Set(index string, value *nca7.Value) bool


